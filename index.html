<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Procrastinate.</title>
  <link rel="stylesheet" href="style.css">
  <!-- ниже подключили стили для мобильных устройств: в конце урока сможете поделиться проектом в социальных сетях без страха, что на телефоне друга или подруги будет выглядеть некрасиво -->
  <link rel="stylesheet" href="https://code.s3.yandex.net/web-code/adaptive.css">
  <link rel="icon" type="image" href="https://code.s3.yandex.net/web-code/js-favicon.ico">
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-N979T7JJMY"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'G-N979T7JJMY');
  </script>
</head>
<body>
  <div class="header">
    <p class="logo">Procrastinate.</p>
    <div class="button" onclick = "sendData_Button1()">Ещё идея</div>

    <a href="working.html"> <div class="button_2" >Начать лениться</div> </a>
  </div>

  <img class="image" src="https://code.s3.yandex.net/web-code/procrastinate/9.png">

  <div class="advice">
    <span>Не писать код, а</span>
    <span class="phrase">что бы поделать?</span>
    <img class="cursor" src="https://code.s3.yandex.net/web-code/cursor.gif">
  </div>

  <p class="footer">© 2020 Сделал Алешновский Валя</p>

  <script src="https://code.s3.yandex.net/web-code/smoothly.js"></script>
  <script>
    function clientid_ga4() {
    	var match = document.cookie.match('(?:^|;)\\s*_ga=([^;]*)');
    	var raw = (match) ? decodeURIComponent(match[1]) : null;
    if (raw)
    {
    match = raw.match(/(\d+\.\d+)$/);
    }
    var gacid = (match) ? match[1] : null;
    if (gacid)
    {
    	return gacid;
    }
    }
    
    // please use this https://www.ietf.org/rfc/rfc4122.txt
    //or this simple variant:
    function uuidv4_ga4() {
      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
    	var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
    	return v.toString(16);
      });
    }
    
    // Referrer (страница с которой пользователь пришел)
    function referrer_ga4()
    {
    if(document.referrer==""){
    return "direct none"
    }
    else return document.referrer
    }
    
    function url_language_ga4() {
        const url = new URL(window.location.href);
        var pagepath = url.pathname.toString();
        var arrayOfStrings = pagepath.split('/');
        if(arrayOfStrings[arrayOfStrings.length - 1].length == 2) {
            return arrayOfStrings[arrayOfStrings.length - 1]
        } else {
            return 'en'
        }
    }
    
    function getTimeStamp_ga4() {
    var now = new Date();
    	var tzo = -now.getTimezoneOffset();
    	var dif = tzo >= 0 ? '+' : '-';
    	var pad = function(num) {
        	var norm = Math.abs(Math.floor(num));
        	return (norm < 10 ? '0' : '') + norm;};
    	return now.getFullYear()
        	+ '-' + pad(now.getMonth()+1)
        	+ '-' + pad(now.getDate())
        	+ 'T' + pad(now.getHours())
        	+ ':' + pad(now.getMinutes())
        	+ ':' + pad(now.getSeconds())
        	+ '.' + pad(now.getMilliseconds())
        	+ dif + pad(tzo / 60)
        	+ ':' + pad(tzo % 60);
    }
           
    function datetime_greenwich_ga4() {
    const date = new Date();
    
    // returns UTC (=GMT) Hour of the date
    let hour = date.getUTCHours();
    
    // returns UTC (=GMT) Minutes of the date
    let minute = date.getUTCMinutes();
    
    // returns UTC (=GMT) Seconds of the date
    let seconds = date.getUTCSeconds();
    
    // returns UTC (=GMT) year of the date
    let year = date.getUTCFullYear();
    
    // returns UTC (=GMT) month (0-11)
    //	0 is January, 11 is December
    let month = date.getUTCMonth();
    
    // returns UTC (=GMT) day of the month (1-31)
    let day = date.getUTCDate();
    
       return `${year}-${month+1}-${day} ${hour}:${minute}:${seconds}`;
    }
    
    function url_tags_ga4() {
    	if(document.URL.split('?')[1] != undefined) {
            	var tags = document.URL.split('?')[1]
            	return tags
    	}
    	else if(document.URL.split('#')[1] != undefined) {
            	var tags = document.URL.split('#')[1]
            	return tags
    	}
    	else
        	return  'undefined'
     	}


    var clickCount = 0;
    function sendData_Button1() {
        // Здесь вы можете добавить код для выполнения определенных действий при нажатии на кнопку
        // alert('Функция отправлена!');
        // В этом примере функция просто выводит сообщение с помощью alert()
        // Вы можете изменить эту функцию, чтобы выполнить нужные вам действия
        for (var i = 0; i < 10; i++) {
            setTimeout(function() {
                // Здесь вы можете добавить код для выполнения определенных действий
                // которые нужно выполнить с задержкой в 1 секунду
                // alert('Функция отработала ' + (clickCount * 10 + (i+1)) + ' раз');
              console.log('Функция отработала ' + (clickCount * 10 + (i+1)) + ' раз');
              gtag('event', 'button_click', {
      	'send_to': 'G-N979T7JJMY',
             	'event_option1': 'sendData_Button1',
             	'event_option2': i,
             	'event_option3': 'undefined',
             	            
              	'hit_id': getTimeStamp_ga4(),
              	'uu_id': uuidv4_ga4(),
              	'uu_id_2': uuidv4_ga4(),
              	'datetime_greenwich': datetime_greenwich_ga4(),
              	'datetime_greenwich_2': datetime_greenwich_ga4(),
              	'client_id_ga': clientid_ga4() + '.',
    
              	'locale': url_language_ga4(), 
              	'page_referrer_ga': referrer_ga4(),
              	'url_tags': url_tags_ga4(),
              	'ab_test': 'undefined'
    });
            }, 100 * (i+1));
        }
    }
  </script>
  <script src="script.js"></script>
</body>
</html>
